频率响应测量方法
==============

来自 [百度文库](https://wenku.baidu.com/view/9696416cb9d528ea80c779c0.html)
 
频率响应测量的方法很多，一般同使用的测试信号有关。
可分为：
i. 点测法：完全按定义设计的测量方法，逐个频率输入振幅恒定的正弦信号，逐个点测量相应频率扬声器输出声压级，在频率响应坐标纸上绘出相应的点，把这些不连续的点的平滑连线即为频率响应曲线。测量耗时、测量有限的非连续频率点，过渡点是推测的。

ii. 扫频自动记录法：使用机械传动的方法改变振荡电路中的电容，使信号的频率连续改变，输出电压恒定，这叫扫频信号，记录仪上记录纸的频率刻度与信号源同步，记录扬声器的输出声压级随频率的变化，即为频率响应曲线，这方法叫扫频自动记录法。后来，机械扫频信号改成电压控制频率的压控振荡器，改进了机械传动的麻烦。这是60～80年代丹麦B&K公司为代表的测量技术。扫频自动测量原理大约已有40年的历史，其测量原理没有变化，改变的只是使用的技术，譬如扫频信号的产生方法，测量传声器测得的数据的采集、处理、运算和输出数据和曲线都可以由计算机完成。其中需要特别一提的是：对扫频信号的理解和生成技术，连续扫频信号过去理解为点频信号随时间变化，但点频信号是一个连续周期信号，从示波器看到的是一个按周期重复的正弦波形，而扫频信号没有一个频率是经历时间周期的，随扫频时间变化的是它的瞬时频率。瞬时频率数学上是相位对时间的微分。可以这样理解：譬如f=100Hz正弦信号的周期是T=0.01秒，其走过的相位φ= 2π弧度(360°)，而f=200Hz时，T＝0.005秒，其走过的相位仍然是φ= 2π弧度，这样，一个微小时间内的相位变化（等效于相位对时间的微分）同周期成反比，相当于稳态频率。同稳态信号不同的是它引入扫频速率（S：Hz/s）的概念，瞬时频率fi =S t +f0；t为扫频时间；f0为扫频初始频率。t和f0确定扫频频率范围。稳态单频信号的公式是u(t)=Acos(2πft);f为稳态单频信号的频率。而扫频信号的公式是u(t)=ACos(πSt2),B&K公司的2012音频分析仪的TSR（时选响应）技术中使用的测试信号，就是采用该数学模型生成的信号。 

iii. 阶步步进的猝发声测量。猝发声是若干个周期的正弦信号脉冲，或称正弦波列。它由连续周期信号加一时间控制电路组成，当测量声压级的时间窗正好在猝发声的稳定部分时，它更接近点频测量。由一个个不同频率的猝发声组成一个阶步步进的猝发声，用对应的跟踪滤波器跟踪每一个猝发声，类似点频测量得到扬声器的频率响应。美国ATI公司的扬声器测量系统LMS使用的正是这种信号源，它最多可以在一个十进制频率范围内设置200个猝发声频率点，即频率阶步的间隔是1/60倍频程。

iv. 多频音（Muiti-tone Burst也叫多频猝发声）它是数字生成的M个纯音信号的叠加的一个短时间间隔的信号，该时间间隔对M个频率来说正好都是整周期的，并且这由低到高M个频率之间没有谐波关系，即2个频率相除（大数除小数）的商不会是整数。例如： 14.5，31.9，37.7，49.3，55.1……Hz；可以排列成一个数列，选择适当的频率间隔，组成M个频率的多频音。其M个频率的同步FFT即为基频即幅频响应，由其谐波可以实现其谐波失真测量。该技术使用在AP公司的“系统1”和“系统2”的仪器上。

v. 脉冲数字测量技术上面所有的方法都离不开正弦信号，只是频率的连续变化、频率的阶步变化和有限频率成分的合成信号，脉冲信号和MLS信号需要进行时域（时间波形）和频域（频率响应和频率分析）之间的变换，从中可以得到更多信息，它作用于被测系统后的输出响应，经过变换和运算可以得到被测系统的许多信息，这需要对测试信号有充分了解，涉及信号与系统的基本理论，又要借助数字信号处理技术进行变换运算。单脉冲信号的性质，

从时域（时间波形）上看，是一个非常简单的方波（矩形波），没有周期重复，当对它进行FFT（快速付里叶变换）转换到频域时，它是一个具有均匀频谱的宽带信号，脉冲越窄均匀频谱的带宽越宽，例如一个10微秒（10×10－6秒）的单脉冲信号，其频宽大于20kHz，即如果均匀频谱部分幅频响应为0dB，相位为0°，则到10kHz：幅频响应为-0.4dB，相位为-18°;到20kHz， 幅频响应为-1.8dB，相位为-36°在我们的测量精度范围内是足够了。当被测系统（如一只扬声器）的输入端输入一个单脉冲信号，则被测系统的输出为该单脉冲信号的响应，在时域是一个脉冲形成和衰减过程的信号，由于单脉冲信号在频域具有宽带的均匀频谱，则其响应在频域就是频率响应，也就是对单脉冲响应的时域波形进行FFT变换就达到系统的频率响应。由于FFT的运算是复数运算，复数的模随频率的变化就是系统的幅频响应，而相位随频率的变化就是相位频率响应，所以用这个方法可以同时得到幅频和相频响应。但扬声器的测量由于扬声器和测量传声器之间有一个空间距离，于是引入“线性相移”的概念，该相移是随频率线性变化的，为了得到扬声器本身的相位响应，必须扣除这部分相移，这是扬声器相位测量中的线性相移修正。理论分析时输入的单脉冲的脉宽趋向0，称为δ函数，其时域响应称为“单位脉冲响应”或“冲激响应”，频域响应即复数表示的频率响应，两者互为付里叶和逆付里叶变换，在数字信号处理中为快速付里叶变换（FFT）和逆快速付里叶变换（IFFT）。示意如下图：图6.14 脉冲响应h（t）和频率响应H（ω）互为付里叶变换单脉冲响应测量中有一个信噪比问题。因为脉冲的激励时间很短，相对环境噪声能量太弱，所以测量时的信噪比很小，为了提高信噪比采用多个脉冲激励，接收时采用同步叠加和平均处理的技术，当叠加1次，信噪比增加3dB，叠加4次增6dB，叠加8次增9dB……；要提高30dB需要叠加1000次，自然是非常耗时的。英国KEF的L. R. Fincham在其1977年发表的著名论文中最早提出该方法，但国外没有用该方法制作过专用仪器。

vi. MLS技术 MLS技术，是使用最长序列（MLS-Maximum Length Sequence）伪随机噪声作为输入扬声器的测试信号，扬声器的输出声信号同该输入信号的互相关函数即得到系统的冲激响应（或叫单位脉冲响应），它是系统在时域的基本响应，相应的频域［由快速付里叶变换（FFT）得到］即系统的幅频响应和相频响应。互相关函数的计算由快速哈德曼变换（FHT）得到，所以该方法又叫MLS-FHT技术。这段描述大部分非专业读者读不懂，下面的叙述希望能解决这个通俗化问题。
• MLS信号。
MLS（Maximum Length Sequence）是最长序列码的缩写，它来源于线性分组码制中的循环码，数字信号是二进制的，即只有0、1二个状态，可以用二进制的循环码组成一个二进制数字信号，循环码的结构可以用代数方法来表示、分析和构造，该代数方法就是它的原始多项式，其运算是逻辑的“异”“或”运算。它的循环性质可以用循环反馈移位寄存器来容易地实现。当MLS码的多项式是m次时，它的循环码长为N=2m-1，即由N个二进制数（0、1）组成，然后是N个二进制数的周期重复，当0为负脉冲，1为正脉冲时，并与循环MLS码的0、1相对应时，这就构成了MLS数字信号。举个简单的例子，当m=3，则码长N＝7，MLS码为0010111，然后重复0010111；当m=4，则N＝15，MLS码为000100110101111，码长为N=15，然后重复；m=5，则N＝31，MLS码长为31位数0000100101100111110001101110101，实用时取m=12，即码长为N=4095位的二进制数，取m=16，则N＝65535，就无法列出了。这个信号从模拟角度看似乎应属于周期信号，但它的频谱接近白噪声的随机信号，所以这样的信号被定义为伪随机噪声信号。其振幅谱基本平坦，而相位是杂乱的，但不是真正的无规，其频谱是可以重复的，是有确定性的。
• MLS信号的变换特性和系统响应。 
使用MLS信号作为测试信号，需要了解MLS信号的一些变换特性。MLS信号的自相关函数为一脉冲信号，即当一MLS信号输入被测系统时，通过变换可以等效于一个脉冲信号。经推导，被测系统的系统输出响应同输入MLS信号的互相关函数是系统的单位脉冲响应，得到单位脉冲响应就同脉冲测量方法完全等效了。单位脉冲响应的付里叶变换就是系统频率响应。进行互相关运算时，也有个快速算法称快速哈达曼变换（Fast Hadamard Transform-FHT），所以该方法也称MLS－FHT方法。该过程是：一个N点的MLS经D/A变换为模拟信号激励被测系统，系统的输出响应作N个采样，同原来的N点MLS作一次互相关运算(FHT变换运算)，得到系统的脉冲响应，数字化单位脉冲响应的FFT即得到系统频率响应。示意如下图： 图6.15 MLS响应、脉冲响应h（t）和频率响应H（ω）之间的变换关系该方法早在1979年被使用，1982年使用了FHT的互相关算法。该方法有很好的信噪比，测量操作方便，被广泛使用，前面提到的MLSSA，和AP公司的“系统2”中的MLS软件都是使用这个方法。
MLS和数字脉冲测量技术都可以用于非消声室模拟自由场测量，只要得到脉冲响应后，在时域脉冲响应图上，把时间窗加在反射声到达前，在时间窗内的直达声进行FFT就实现了非消声室模拟自由场测量。 MLS测量技术也有其局限性，比如不能实现谐波失真等非线性失真的测量，这里就不再论述。 
 
vii. TDS（Time delay Spectrometry）技术 TDS是时间延迟谱技术，由Heyser在1967年提出的，被认为是声学测量中的划时代文献。它是用跟踪滤波器为了同馈给扬声器扫频电信号的频率同步。加入了扬声器到传声器的时间延迟实现频率响应的非消声室测量，后来用数字信号运算的方法实现，丹麦B&K公司的2012音频分析仪中的TSR（Time Selective Response时间选择响应）技术就是对TDS改进的算法。以上的几种测量技术的测量结果是等效的。

viii. 粉噪声，1/3倍频程分析测量方法馈给扬声器等电压的经1/3倍频程滤波的窄带粉红噪声，其中心频率按标准的1/3倍频程步进，一次测量扬声器产生的声压级，即得到1/3倍频程粉噪声响应谱图，也可以馈给扬声器宽带粉噪声电信号，用1/3倍频程分析扬声器的声输出，得到1/3倍频程频谱图，他同步进的1/3倍频程粉噪声测量基本上是等效的。该方法用在GB/T7313-1987中测量高保真扬声器系统的频响，下面测量左右主扬声器箱的幅频响应差，使用的也是这个方法。
